<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Logical Tab Order Demo</title>
    <style>
      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        padding: 1.5rem;
        background-color: #f9fafb;
        max-width: 400px;
      }

      h3 {
        margin-top: 0;
        color: #374151;
        font-size: 1.1em;
      }

      fieldset {
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        background: white;
      }

      legend {
        font-weight: bold;
        color: #374151;
        padding: 0 0.5rem;
      }

      .form-row {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }

      .form-group {
        flex: 1;
        margin-bottom: 1rem;
        position: relative;
      }

      label {
        display: block;
        margin-bottom: 0.25rem;
        font-weight: 500;
        color: #374151;
      }

      input[type="text"],
      input[type="email"],
      input[type="tel"],
      select {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #d1d5db;
        border-radius: 4px;
        font-size: 0.9em;
        background: white;
      }

      input:focus,
      select:focus,
      button:focus {
        outline: 3px solid #f59e0b;
        outline-offset: 2px;
        border-color: #3b82f6;
      }

      /* Reduced motion preferences */
      @media (prefers-reduced-motion: reduce) {
        * {
          transition-duration: 0.01ms !important;
          animation-duration: 0.01ms !important;
        }
      }

      button {
        background: #3b82f6;
        color: white;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin: 0.25rem;
      }

      button:hover {
        background: #2563eb;
      }

      .button-row {
        text-align: center;
        margin-top: 1rem;
      }

      .success {
        background: #dcfce7;
        color: #166534;
        border: 2px solid #22c55e;
        padding: 0.75rem;
        border-radius: 4px;
        font-size: 0.8em;
        margin-top: 1rem;
        text-align: center;
      }

      .step-indicator {
        position: absolute;
        top: -25px;
        right: 5px;
        background: #22c55e;
        color: white;
        border-radius: 50%;
        width: 25px;
        height: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8em;
        font-weight: bold;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* THE SOLUTION: Natural tab order (no manual tabindex) */
    </style>
  </head>
  <body>
    <h3>Order Form</h3>
    <p style="font-size: 0.85em; color: #6b7280; margin-bottom: 1rem">
      <strong>Tab through this form</strong> - notice the logical, predictable
      flow!
    </p>

    <form aria-label="Product order form">
      <!-- Natural document order = logical tab order -->
      <fieldset>
        <legend>Personal Information</legend>
        <div class="form-row">
          <div class="form-group">
            <label for="first-name-good"
              >First Name <span aria-hidden="true">*</span></label
            >
            <input
              type="text"
              id="first-name-good"
              required
              aria-describedby="fname-help"
            />
            <div id="fname-help" class="sr-only">
              Required field for your first name
            </div>
            <div class="step-indicator">1</div>
          </div>
          <div class="form-group">
            <label for="last-name-good"
              >Last Name <span aria-hidden="true">*</span></label
            >
            <input
              type="text"
              id="last-name-good"
              required
              aria-describedby="lname-help"
            />
            <div id="lname-help" class="sr-only">
              Required field for your last name
            </div>
            <div class="step-indicator">2</div>
          </div>
        </div>

        <div class="form-group">
          <label for="email-good"
            >Email <span aria-hidden="true">*</span></label
          >
          <input
            type="email"
            id="email-good"
            required
            aria-describedby="email-help"
          />
          <div id="email-help" class="sr-only">
            Required field for your email address
          </div>
          <div class="step-indicator">3</div>
        </div>
      </fieldset>

      <fieldset>
        <legend>Contact Details</legend>
        <div class="form-row">
          <div class="form-group">
            <label for="phone-good">Phone</label>
            <input type="tel" id="phone-good" aria-describedby="phone-help" />
            <div id="phone-help" class="sr-only">
              Optional field for your phone number
            </div>
            <div class="step-indicator">4</div>
          </div>
          <div class="form-group">
            <label for="country-good"
              >Country <span aria-hidden="true">*</span></label
            >
            <select id="country-good" required aria-describedby="country-help">
              <option value="">Select...</option>
              <option value="us">USA</option>
              <option value="mg">Madagascar</option>
            </select>
            <div id="country-help" class="sr-only">
              Required field to select your country
            </div>
            <div class="step-indicator">5</div>
          </div>
        </div>
      </fieldset>

      <div class="button-row">
        <button type="button" aria-describedby="clear-help">Clear</button>
        <div id="clear-help" class="sr-only">
          Clear all form fields and start over
        </div>
        <button type="submit" aria-describedby="submit-help">
          Submit Order
        </button>
        <div id="submit-help" class="sr-only">
          Submit the order form. All required fields must be completed
        </div>
      </div>
    </form>

    <div class="success">
      <strong>âœ… Smooth and predictable!</strong><br />
      No manual tabindex values - elements follow their natural document
      order.<br />
      This matches users' visual expectations perfectly.<br />
      Plus: Fieldsets group related fields and ARIA support for screen readers!
    </div>

    <script>
      // Show step numbers when elements receive focus
      let stepCounter = 0;
      const elements = document.querySelectorAll("input, select, button");

      document.addEventListener("focusin", function (e) {
        if (e.target.matches("input, select, button")) {
          const indicator =
            e.target.parentNode.querySelector(".step-indicator");
          if (indicator) {
            indicator.style.opacity = "1";
          }
        }
      });

      document.addEventListener("focusout", function (e) {
        if (e.target.matches("input, select, button")) {
          const indicator =
            e.target.parentNode.querySelector(".step-indicator");
          if (indicator) {
            indicator.style.opacity = "0";
          }
        }
      });

      // Simple form handling for demo
      document.querySelector("form").addEventListener("submit", function (e) {
        e.preventDefault();
        alert("Order submitted successfully! (This is just a demo)");
      });

      document
        .querySelector('button[type="button"]')
        .addEventListener("click", function () {
          document.querySelector("form").reset();
          alert("Form cleared!");
        });
    </script>
  </body>
</html>
